## ğŸ” ç±»çš„ç»§æ‰¿ç»“æ„

```
    GrandParent
      /    \
     /      \
Parent1   Parent2
     \      /
      \    /
       Child
```

- `Parent1` å’Œ `Parent2` éƒ½**è™šç»§æ‰¿**è‡ª `GrandParent`ã€‚
- `Child` ç»§æ‰¿è‡ª `Parent1` å’Œ `Parent2`ã€‚

------

## ğŸ“¦ æ¯ä¸ªç±»çš„æˆå‘˜åˆ†æ

- `GrandParent`ï¼š1 ä¸ª `int`ï¼ˆ4 å­—èŠ‚ï¼‰
- `Parent1`ï¼š
  - è™šç»§æ‰¿æŒ‡é’ˆè¡¨æŒ‡é’ˆï¼ˆä¸€èˆ¬æ˜¯ 8 å­—èŠ‚ï¼Œåœ¨ x64 ä¸Šï¼‰
  - æˆå‘˜å˜é‡ `int p1_val`ï¼ˆ4 å­—èŠ‚ï¼‰
- `Parent2`ï¼š
  - åŒæ ·æœ‰è™šç»§æ‰¿è¡¨æŒ‡é’ˆ + `int p2_val`
- `Child`ï¼š
  - æˆå‘˜å˜é‡ `int c_val`

------

## ğŸ§  è™šç»§æ‰¿çš„å½±å“

- è™šç»§æ‰¿ä¼šå¯¼è‡´ `GrandParent` çš„å­å¯¹è±¡åœ¨å†…å­˜ä¸­è¢«**æå‡åˆ°æœ€ä¸Šæ–¹**ï¼Œåªä¿ç•™ä¸€ä»½ `g_val`ã€‚
- **ä½†ä¸ºäº†æ”¯æŒè™šç»§æ‰¿**ï¼Œ`Parent1` å’Œ `Parent2` éƒ½éœ€è¦é¢å¤–çš„æŒ‡é’ˆæ¥æŒ‡å‘ `GrandParent` çš„ä½ç½®ï¼ˆè™šåŸºè¡¨æŒ‡é’ˆï¼Œé€šå¸¸æ˜¯ 8 å­—èŠ‚ï¼‰ã€‚
- æ•´ä½“ç»“æ„åŒ…å«äº†å¤šä¸ªé—´æ¥å±‚å’Œå¯¹é½å¡«å……ã€‚

------

## ğŸ“ x86_64 ä¸Šçš„ `sizeof(Child)`

æˆ‘ä»¬å¯ä»¥ç”¨ä¸€äº›ç¼–è¯‘å™¨è¯•éªŒå¾—å‡ºå¸¸è§ç»“æœï¼š

```
g++ -m64 -std=c++11 test.cpp -o test && ./test
```

**è¾“å‡ºç»“æœé€šå¸¸æ˜¯ï¼š`sizeof(Child) = 40`**

------

## ğŸ§¾ è§£é‡Šè¿™ä¸ª 40 å­—èŠ‚æ€ä¹ˆæ¥çš„ï¼Ÿ

å‡è®¾æ˜¯ 64 ä½ç¼–è¯‘ç¯å¢ƒï¼ˆå¦‚ Linux/macOS ä¸Šçš„ g++ ç¼–è¯‘å™¨ï¼‰ï¼š

1. `GrandParent`ï¼š4 å­—èŠ‚ï¼ˆåŠ ä¸Šå¯¹é½ 8 å­—èŠ‚ï¼‰
2. `Parent1`ï¼š
   - è™šç»§æ‰¿æŒ‡é’ˆï¼ˆ8 å­—èŠ‚ï¼‰
   - `int p1_val`ï¼ˆ4 å­—èŠ‚ï¼‰+ padding
3. `Parent2`ï¼š
   - è™šç»§æ‰¿æŒ‡é’ˆï¼ˆ8 å­—èŠ‚ï¼‰
   - `int p2_val`ï¼ˆ4 å­—èŠ‚ï¼‰+ padding
4. `Child`ï¼š`int c_val`ï¼ˆ4 å­—èŠ‚ï¼‰+ padding

åŠ èµ·æ¥å¤§çº¦ä¼šæ˜¯ï¼š
 `4 (GrandParent)` + `8+4 (Parent1)+4` + `8+4 (Parent2)+4`+ + `4 (Child)` â‰ˆ 40 å­—èŠ‚ï¼ˆå®é™…å¤§å°å–å†³äºå¸ƒå±€å’Œå¯¹é½ï¼‰

------

## âœ… æœ€ç»ˆç­”æ¡ˆ

```
Size of Child: 40
```
