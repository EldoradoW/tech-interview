`sizeof` 和 `strlen` 是 C/C++ 中**非常容易混淆**的两个操作符/函数，它们都可以“看起来”像是获取字符串长度，但本质、用途和行为**完全不同**。

下面是详解对比：

------

## 🧠 一句话总结

| 操作     | 意义                                      | 类型         |
| -------- | ----------------------------------------- | ------------ |
| `sizeof` | **编译期计算类型/变量所占字节数**         | 编译器操作符 |
| `strlen` | **运行时计算 C 字符串的长度（不含`\0`）** | 标准库函数   |



------

## ✅ 一、`sizeof`：大小（单位：字节）

- 作用：计算变量或类型所占的**内存空间大小**，单位是 **字节（byte）**。
- 编译期就能得到，不执行程序也能知道。
- 包括结尾的 `\0`。

```cpp
char str[] = "abc";
sizeof(str);      // 4，因为是 {'a', 'b', 'c', '\0'} 共 4 字节
```

也可以这样用：

```cpp
sizeof(int);       // 通常是 4
sizeof(char);      // 1
sizeof("abc");     // 是 4（因为是 char[4]）
```



------

## ✅ 二、`strlen`：字符串长度（单位：字符数）

- 作用：返回**C 字符串的实际字符个数**，**不包括结尾的 `\0`**。
- 是个函数，定义在 `<cstring>`（C）或 `<string.h>` 中。
- 必须传入的是 **以 `\0` 结尾的 C 字符串**，否则会 **出错或崩溃**。

```cpp
char str[] = "abc";
strlen(str);      // 3，只数 'a', 'b', 'c'，不含 '\0'
```



------

## 📌 三、常见例子对比

### 示例 1：字符数组

```cpp
char str[] = "hello";

sizeof(str);   // 6 （包括 '\0'）
strlen(str);   // 5
```

------

### 示例 2：指针变量

```cpp
char* p = "hello";

sizeof(p);     // 8（在 64 位系统上，指针占 8 字节）
strlen(p);     // 5（字符串实际长度）
```

🔸 `sizeof(p)` 得到的是指针本身的大小，而不是字符串内容！

------

### 示例 3：字面值字符串

```cpp
sizeof("hi");     // 3，包括 '\0'
strlen("hi");     // 2
```



------

## 🛑 四、易错点提醒

| 错误做法                            | 问题                                                    |
| ----------------------------------- | ------------------------------------------------------- |
| `strlen` 用在没有 `\0` 的字符数组上 | 会一直读取到内存中的下一个 `\0`，造成未定义行为甚至崩溃 |
| 把 `sizeof` 当作字符串长度用        | 会多算 1 个字节，因为包括了 `\0`                        |
| `sizeof(ptr)` 认为是字符串长度      | 实际只是 4 或 8（指针大小），**不是内容大小！**         |



------

## ✅ 五、总结对比表格

| 方面        | `sizeof`                  | `strlen`                        |
| ----------- | ------------------------- | ------------------------------- |
| 类型        | 编译期操作符              | 运行时函数（`<cstring>`）       |
| 单位        | 字节                      | 字符数                          |
| 包括 `\0`？ | ✅ 是                      | ❌ 否                            |
| 对象        | 任意类型或变量            | 必须是 C 字符串（以 `\0` 结尾） |
| 适用        | 类型大小、结构体、数组    | 处理字符串内容长度              |
| 常见错误    | `sizeof(char*) != strlen` | `strlen(非\0结尾)` 崩溃         |



------

## 🎯 建议使用场景

- 想知道数组或类型所占内存大小 → 用 `sizeof`
- 想知道 C 字符串的长度（排除 `\0`） → 用 `strlen`
- 用 `std::string` → 直接用 `.size()` 或 `.length()`，更安全
